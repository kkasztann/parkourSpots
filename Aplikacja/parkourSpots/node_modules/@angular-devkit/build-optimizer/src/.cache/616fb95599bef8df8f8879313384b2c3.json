{"remainingRequest":"c:\\Users\\Kasztan\\Desktop\\Programowanie\\Angular\\AngularGotoweApki\\parkourSpots\\Aplikacja\\parkourSpots\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js??ref--8-1!c:\\Users\\Kasztan\\Desktop\\Programowanie\\Angular\\AngularGotoweApki\\parkourSpots\\Aplikacja\\parkourSpots\\node_modules\\angularfire2\\firestore\\collection\\changes.js","dependencies":[{"path":"c:\\Users\\Kasztan\\Desktop\\Programowanie\\Angular\\AngularGotoweApki\\parkourSpots\\Aplikacja\\parkourSpots\\node_modules\\angularfire2\\firestore\\collection\\changes.js","mtime":1530660614092},{"path":"c:\\Users\\Kasztan\\Desktop\\Programowanie\\Angular\\AngularGotoweApki\\parkourSpots\\Aplikacja\\parkourSpots\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1530660615278},{"path":"c:\\Users\\Kasztan\\Desktop\\Programowanie\\Angular\\AngularGotoweApki\\parkourSpots\\Aplikacja\\parkourSpots\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js","mtime":1530660608942}],"contextDependencies":[],"result":["import { fromCollectionRef } from '../observable/fromRef';\r\nimport { map, scan } from 'rxjs/operators';\r\nexport function docChanges(query) {\r\n    return fromCollectionRef(query)\r\n        .pipe(map(function (action) {\r\n        return action.payload.docChanges()\r\n            .map(function (change) { return ({ type: change.type, payload: change }); });\r\n    }));\r\n}\r\nexport function sortedChanges(query, events) {\r\n    return fromCollectionRef(query)\r\n        .pipe(map(function (changes) { return changes.payload.docChanges(); }), scan(function (current, changes) { return combineChanges(current, changes, events); }, []), map(function (changes) { return changes.map(function (c) { return ({ type: c.type, payload: c }); }); }));\r\n}\r\nexport function combineChanges(current, changes, events) {\r\n    changes.forEach(function (change) {\r\n        if (events.indexOf(change.type) > -1) {\r\n            current = combineChange(current, change);\r\n        }\r\n    });\r\n    return current;\r\n}\r\nexport function combineChange(combined, change) {\r\n    switch (change.type) {\r\n        case 'added':\r\n            if (combined[change.newIndex] && combined[change.newIndex].doc.id == change.doc.id) {\r\n            }\r\n            else {\r\n                combined.splice(change.newIndex, 0, change);\r\n            }\r\n            break;\r\n        case 'modified':\r\n            if (change.oldIndex !== change.newIndex) {\r\n                combined.splice(change.oldIndex, 1);\r\n                combined.splice(change.newIndex, 0, change);\r\n            }\r\n            else {\r\n                combined.splice(change.newIndex, 1, change);\r\n            }\r\n            break;\r\n        case 'removed':\r\n            combined.splice(change.oldIndex, 1);\r\n            break;\r\n    }\r\n    return combined;\r\n}\r\n//# sourceMappingURL=changes.js.map",null]}